## 前端性能优化

#### 1、尽量减少HTTP请求个数
合并图片(CSS Sprites，内置图片使用数据)，合并CSS、JS。
#### 2、使用CDN(内容分发网络)
CDN的基本思路是尽可能避免互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，是内容传输的更快、更快、更稳定。  
通过在网络各处放置节点服务器所构成的在现有互联网基础之上的一层只能虚拟网路。  
 关注：镜像、高速缓存、专线，以及智能路由器和负载均衡。  
如果有能力的话，把静态资源文件如图片、字体、JS库等放到CDN可以大幅提高访问速度。使用CDN应该给每个文件引用加一个时间戳，这样就不用担心缓存在CDN服务器上过期对用户产生影响。
#### 3、为文件头指定Expires或Cache-Control，使内容具有缓存性。
区分静态内容和动态内容，避免以后页面访问中不必要的HTTP请求。  
应该给静态资源文件都加上过期头，过期的日期要定得很遥远，基本上可以认为永不过期，这样浏览器就会缓存静态文件。但为了避免用户更新不到最新的文件，最好在文件名上加上版本控制。  
理解浏览器如何下载资源。为了加速渲染页面，现在浏览器并行下载所需的资源。可以给script标签加上defer属性可以告诉浏览器该脚本不会在页面加载完成之前操作DOM。如果脚本没有依赖关系，async是很有必要的。
#### 4、启动Gzip压缩  
减少文件体积，提高传输速度。服务器开启gzip压缩可以将文本文件传输流量平均减少70%左右。  
启动Gzip压缩后HTTP响应报文中Content-Encoding的值为gzip。
针对不支持gzip的浏览器设置vary。
#### 5、将CSS放在顶部<head>内。
浏览器会同时解析HTML和渲染元素，把CSS放到前面可以保证先渲染的一部分元素样式是正确的，而把CSS放到后面会引起大量的浏览器重绘。
#### 6、把Javascript放在<body>尾部
要把script标签放到尾部，因为浏览器会预处理js文件，把js文件放到头部会延迟页面元素的渲染，让用户觉得页面打开变慢了。
#### 7、避免在CSS中使用CSS表达式
页面显示和缩放、滚动、乃至移动鼠标时，CSS表达式都会重新计算，会严重影响性能。CSS表达式只在IE5、IE6、IE7被支持。
#### 8、将CSS和JS放到外部文件中
我们需要权衡内置代码带来的HTTP请求减少与通过使用外部文件进行缓存带来的好处的折中点。  
只用于一个页面，不经常被访问，脚本样式较少时，可以嵌在HTML文件中。
#### 9、避免空的src和href属性值：
空src的img元素会被JS动态赋值，导致浏览器会发起一个无用的HTTP请求。同样，点击空href的a标签也会导致浏览器发起HTTP请求，通常是重新加载当前页面，这也是许多初学者难以发掘出的bug的原因所在。
#### 10、减少DNS查找次数
可以将不同的静态文件放在不同的服务器上，以缓解服务器的压力，保持并行下载。但是也要权衡DNS查找次数和保持较高程度并行下载之间的关系。
#### 11、对Javascript和CSS进行代码压缩：
压缩代码可以显著节省带宽并提高加载速度。最好在部署到线上的时候利用工具对代码进行压缩。
#### 12、避免跳转
避免重定向也是减少HTTP请求的数量的方法。在URL结尾缺少"/"也是重定向的场景。  
重定向会导致服务器和浏览器之间建立多次连接。  
跨域跳转使用mode_rewrite建立CNMAG
#### 13、删除重复的JS、CSS
重复调用脚本，会增加额外的HTTP请求，而且可能会进行多次运算，产生多次运算。
实际项目中可能会有一个common.css来让每个页面都引用，表示那些公共样式，应该尽量让这种公共文件的利用率达到最大。
#### 14、配置Etags
Entity tags（ETags）（实体标签）是web服务器和浏览器用于判断浏览器缓存中的内容和服务器中的原始内容是否匹配的一种机制（“实体”就是所说的“内容”，包括图片、脚本、样式表等），是比last-modified date更更加灵活的机制，单位时间内文件被修过多次，Etag可以综合Inode(文件的索引节点(inode)数)，MTime(修改时间)和Size来精准的进行判断，避开UNIX记录MTime只能精确到秒的问题。服务器集群使用，可取后两个参数。使用ETags减少Web应用带宽和负载。
#### 15、使用Ajax缓存
利用时间戳，更精巧的实现相应可缓存与服务器数据同步更新。
#### 16、尽早刷新输出缓冲
JS和CSS文件进行并行下载
#### 17、使用GET完成AJAX请求
使用POST方法发送请求，需要两步，首先发送文件头，然后再发送数据。
#### 18、延迟加载
确定页面正常后，再加载脚本实现动画等效果。
#### 19、预加载
有条件加载，无条件加载和预期的加载。
#### 20、减少DOM元素个数
使用语义化标签，考虑DOM元素中循环的性能开销。  
不要滥用HTML标签。
#### 21、根据域名划分页面内容
实现并行下载
#### 22、减少iframe的个数
iframe的开销比较大
#### 23、避免404
减少服务器资源消耗
#### 24、减少Cookie的大小
去除不必要的Cookie，合理设置过期时间
#### 25、使用无cookie的域
对于静态内容的请求，创建一个子域名用它来存放所有静态内容。
#### 26、减少DOM访问
避免使用JS重绘布局。  
在元素绘制完成后，动态更改DOM结构或CSS样式，都会引起重绘。所以添加元素时，尽量减少添加的次数。不要反复给Element.Style赋值，应将多种样式写在一个类中，再将这个类赋给这个元素。
#### 27、用link标签代替@import
#### 28、优化图像
尝试将GIF图片格式转换PNG格式或其他更节省空间的格式。  
不恰当的图像格式是一种减慢加载速度的罪魁祸首。  正确的图片格式可以让图片缩小数倍，可以减少带宽。
#### 29、不要再HTML中缩放图像
<img width=”100″ height=”100″ src=”https://avatars1.githubusercontent.com/u/18010304?s=40&v=4” alt=”My picture” />
图像的大小就应该是100px*100px。
#### 30、favicon.ico要小且可以缓存
尽量小于1K
#### 31、保持单个内容小于25K
因为iPhone不能缓存大于25K的文件。注意这里指的是解压缩后的大小。由于单纯gizp压缩可能达不要求，因此精简文件就显得十分重要。
